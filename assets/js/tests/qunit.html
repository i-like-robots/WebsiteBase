<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" />

	<title>QUnit tests</title>


	<link rel="stylesheet" href="../../css/base.css" />
	<link rel="stylesheet" href="qunit-1.10.0.css" />

</head>
<body>

	<div id="qunit"></div>

	<script src="../lib/jquery-1.8.2.min.js"></script>
	<script src="../compiled.min.js"></script>
	<script src="qunit-1.10.0.js"></script>

	<script>
		$(function()
		{
			QUnit.config.reorder = false;

			//
			// Base API tests
			//
			var exec = [];

			module('Base API', {
				setup: function()
				{
					base.register('foo', {
						method_1: function()
						{
							return exec.push('');
						},
						_hidden: function()
						{
							return exec.push('');
						}
					});

					base.register('bar', {
						method_1: function()
						{
							return exec.push('');
						},
						_hidden: function()
						{
							return exec.push('');
						}
					});
				},
				teardown: function()
				{
					delete base._views.foo;
					delete base._views.bar;
					delete base._views['foo/baz'];
					exec.length = 0;
					delete window._JSViews;
				}
			});

			test('.register()', function()
			{
				equal( base._views.hasOwnProperty('foo') , true, 'View registered');
				equal( base._views.foo.hasOwnProperty('method_1') , true, 'View properties accessible');
			});

			test('.extend()', function()
			{
				base.extend('foo', 'baz', {
					method_2: function()
					{
						return exec.push('');
					}
				});

				equal( base._views.hasOwnProperty('foo/baz') , true, 'View registered');
				equal( base._views['foo/baz'].hasOwnProperty('method_1') && base._views['foo/baz'].hasOwnProperty('method_2') , true, 'View properties accessible');
			});

			test('.exists()', function()
			{
				equal( base.exists('foo') , true, 'View exists');
				equal( base.exists('baz') , false, 'View does not exist');
			});

			test('.trigger()', function()
			{
				base.trigger('foo');
				equal( exec.length, 1, 'Execute methods within a single view');

				base.trigger('foo,bar');
				equal( exec.length, 3, 'Execute methods within multiple views');

				base.trigger(window._JSViews = 'foo,bar');
				equal( exec.length, 5, 'Execute methods in window._JSViews');
			});

		});
	</script>

</body>
</html>